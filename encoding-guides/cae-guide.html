---
title: Guía CAE
description: 'Codificación consciente del contexto (CAE) analiza cada vídeo de origen y crea de forma inteligente una escala de velocidad de bits personalizada (conjunto de representaciones) para cada contenido. Además, la codificación sensible al contexto tiene en cuenta las limitaciones asociadas con la red de distribución y el dispositivo que se utiliza para ver el contenido. Decide cuántas versiones se necesitan y qué resoluciones y tasas de bits utilizar para cada una, sin dejar de mantener un nivel constante de calidad en todos los títulos. Esto se traduce en ahorros masivos en costos de almacenamiento y ancho de banda, al tiempo que mejora la experiencia de reproducción para los usuarios. Para obtener información adicional, consulte la <a href="/general-information/overview-context-aware-encoding.html">Descripción general de la codificación contextual</a>.'
parent: Encoding Guides
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="Overview">Descripción general</h2>

    <aside class="bcls-aside bcls-aside--information">Notas:
      <ul>
        <li>La codificación sensible al contexto no está disponible para todos los clientes de Zencoder. Si tiene preguntas sobre si puede utilizar la codificación sensible al contexto, comuníquese con su administrador de cuentas.</li>
        <!-- <li>The <a href="/encoding-guides/av1-guide.html">AV1 video codec</a> is currently not supported for CAE jobs.</li> -->
      </ul>
    </aside>
  </section>
  <section class="bcls-section">
    <h2 id="process">Proceso</h2>

    <p>CAE se habilita en un trabajo de Zencoder configurando <code translate="No"><a href="/encoding-settings/general/encoding-settings-job.html#generate_dynamic_profile"><code translate="No">generate_dynamic_profile</code></a></code> a verdadero y sumando <a href="/encoding-settings/general/encoding-settings-general-output-settings.html#dynamic_profile_rendition"><code translate="No">dynamic_profile_rendition</code></a> valores a las salidas del trabajo. Además, puede agregar <a href="/encoding-settings/general/cae-settings.html"><code translate="No">dynamic_profile_options</code></a>, pero esto no es necesario. Después de descargar e inspeccionar el archivo de origen de entrada para el trabajo, Zencoder ejecuta el generador de perfiles dinámicos CAE en el archivo de origen. Las configuraciones de escalera de perfil dinámico resultantes se agregan a cada Salida correspondiente antes de que se codifiquen. La siguiente configuración se establece automáticamente para las salidas con un valor de tendencia_perfil_dinámico:</p>

    <ul>
      <li><code translate="No">width</code></li>
      <li><code translate="No">height</code></li>
      <li><code translate="No">frame_rate</code></li>
      <li><code translate="No">video_codec</code></li>
      <li><code translate="No">video_codec_profile</code></li>
      <li><code translate="No">video_codec_tier</code></li>
      <li><code translate="No">video_codec_level</code></li>
      <li><code translate="No">video_reference_frames</code></li>
      <li><code translate="No">video_bframes</code></li>
      <li><code translate="No">video_bitrate</code></li>
      <li><code translate="No">decoder_bitrate_cap</code></li>
      <li><code translate="No">decoder_buffer_size</code></li>
      <li><code translate="No">keyframe_rate</code></li>
      <li><code translate="No">fixed_keyframe_interval</code></li>
    </ul>
    <p><strong>Salidas de códec mixtas:</strong> puede generar copias mixtas HEVC/H.264. Ver <a href="/encoding-settings/general/cae-settings.html">Configuración CAE</a> para detalles.</p>
    <p>Otras salidas sin <a href="/encoding-settings/general/encoding-settings-general-output-settings.html#dynamic_profile_rendition"> <code translate="No">dynamic_profile_rendition</code></a> comenzará a codificarse tan pronto como se inspeccione la fuente de entrada, al mismo tiempo que se ejecuta el generador de perfiles dinámicos.</p>
  </section>
  <section class="bcls-section">
    <h2 id="guidelines_for_configuring_dynamic_profile_options">Directrices para la configuración <a href="/encoding-settings/general/encoding-settings-general-output-settings.html#dynamic_profile_rendition"><code translate="No">dynamic_profile_options</code></a></h2>

    <h3>Número de copias</h3>

    <p>El número mínimo y máximo de representaciones para crear se controla con el <a href="/encoding-settings/general/cae-settings.html#min_renditions">min_renditions</a> y <a href="/encoding-settings/general/cae-settings.html#max_renditions">max_renditions</a> ajustes. Para un mejor rendimiento, se recomienda dejar un cierto espacio entre estos límites (p. Ej., Establecer <code translate="No">min_renditions</code> a 2 y <code translate="No">max_renditions</code> a 10), lo que permite al generador de perfiles CAE seleccionar el número más adecuado para cada contenido. Para un contenido fácil de codificar, puede producir menos representaciones, mientras que para contenido más complejo puede producir más. También se recomienda configurar min_renditions para que sea lo más pequeño posible, para permitir ahorrar ancho de banda cuando no sean necesarias más representaciones.</p>

    <h3>Resoluciones</h3>

    <p>De forma predeterminada, CAE utiliza una escalera de aproximadamente 30 resoluciones estándar, que van desde <code translate="No">192x108</code> a <code translate="No">7680x4320</code>. Puede limitarse tanto en el extremo bajo como en el alto utilizando el <a href="/encoding-settings/general/cae-settings.html#min_resolution">min_resolution</a> y <a href="/encoding-settings/general/cae-settings.html#max_resolution">max_resolution</a> ajustes. Alternativamente, se puede proporcionar una lista personalizada de resoluciones y configuraciones de códec asociadas en el <a href="/encoding-settings/general/cae-settings.html#video_configurations"><code translate="No">video_configurations</code></a> configuración.</p>

    <h3>Longitud de GOP</h3>

    <p>La <a href="/encoding-settings/general/cae-settings.html#keyframe_rate"><code translate="No">keyframe_rate</code></a> el ajuste controla el máximo <code translate="No">GOP</code> longitud del contenido codificado. Configure esto para que se corresponda con <a href="/encoding-settings/general-audio-video/encoding-settings-segmented-streaming.html#segment_seconds"><code translate="No">segment_seconds</code></a> para codificación HLS / DASH. De lo contrario, se recomienda un valor de 0,5, que corresponde a un intervalo de 2 segundos. <code translate="No">GOP</code> largo.</p>

    <h3>Cobertura de tasa de bits</h3>

    <p>Los límites de las tasas de bits que se utilizarán pueden ser controlados por el <a href="/encoding-settings/general/cae-settings.html#min_bitrate"><code translate="No">min_bitrate</code></a> y <a href="/encoding-settings/general/cae-settings.html#max_bitrate"><code translate="No">max_bitrate</code></a> ajustes. Esto le indicará al CAE que asigne al menos <a href="/encoding-settings/general/cae-settings.html#min_bitrate"><code translate="No">min_bitrate</code></a> Kbps para la primera interpretación y restringir la última interpretación a un máximo <a href="/encoding-settings/general/cae-settings.html#max_bitrate"><code translate="No">max_bitrate</code></a> Kbps.</p>

    <p>Para asegurarse de que las tasas de bits de la reproducción estén espaciadas correctamente, utilice el <a href="/encoding-settings/general/cae-settings.html#min_granularity"><code translate="No">min_granularity</code></a> y <a href="/encoding-settings/general/cae-settings.html#max_granularity"><code translate="No">max_granularity</code></a> ajustes. Por ejemplo, estos se pueden utilizar para asegurarse de que el paso de una tasa de bits a la siguiente no sea menos del 50% de aumento en la tasa de bits o más del 100% de aumento en la tasa de bits. Tenga en cuenta que la mayoría de las pautas de creación de transmisiones recomiendan que la granularidad no supere el 100%.</p>

    <h3>Latencia de inicio, confiabilidad en malas condiciones de red</h3>

    <p>Para asegurarse de que la escalera de tasa de bits siempre comience con una tasa de bits lo suficientemente baja, utilice el <a href="/encoding-settings/general/cae-settings.html#max_first_rendition_bitrate"><code translate="No">max_first_rendition_bitrate</code></a> configuración. Cuanto menor sea la tasa de bits de la primera reproducción, es menos probable que un reproductor de video necesite almacenar en búfer debido a las bajas velocidades de conexión. Además, si el manifiesto de transmisión indica cargar primero la tasa de bits más baja, esto también afectará directamente la latencia de inicio.</p>

    <h3>Soporte para dispositivos heredados</h3>

    <p>Para admitir dispositivos más antiguos que solo son capaces de <code translate="No"><code translate="No">Baseline</code></code> perfil de reproducción H.264, utilice el <a href="/encoding-settings/general/cae-settings.html#select_baseline_profile_configuration"><code translate="No">select_baseline_profile_configuration</code></a> configuración. Cuando se establece, al menos una reproducción se codificará con <code translate="No">Baseline</code> perfil. Las restricciones adicionales (perfil de códec, nivel, número de fotogramas de referencia, fotogramas b, etc.) se pueden controlar con un <a href="/encoding-settings/general/cae-settings.html#video_configurations"><code translate="No">video_configurations</code></a> configuración.</p>
    <p>Tenga en cuenta que <code translate="No">select_baseline_profile_configuration</code> es <code translate="No">true</code> por defecto, y requiere <em>al menos una interpretación</em> para tener una resolución igual o inferior a 512x288.</p>

    <h3>Control de variabilidad VBR</h3>

    <p>Las tasas de bits máximas máximas se pueden controlar con el <a href="/encoding-settings/general/cae-settings.html#bitrate_cap_to_bitrate_ratio"><code translate="No">bitrate_cap_to_bitrate_ratio</code></a> y <a href="/encoding-settings/general/cae-settings.html#bitrate_cap_offset">bitrate_cap_offset</a> ajustes. Si se selecciona una velocidad de bits «<code translate="No">R</code>» para una copia, el <a href="/encoding-settings/general-audio-video/encoding-settings-rate-control.html#decoder_bitrate_cap">decoder_bitrate_cap</a> se calcula de la siguiente manera:</p>

    <pre class="line-numbers">
  <code class="language-javascript" translate="No">decoder_bitrate_cap = R * bitrate_cap_to_bitrate_ratio + bitrate_cap_offset</code></code></pre>

    <p>Del mismo modo, los límites de la memoria intermedia del decodificador se pueden controlar con el <a href="/encoding-settings/general/cae-settings.html#buffer_size_to_bitrate_ratio"><code translate="No">buffer_size_to_bitrate_ratio</code></a> y <a href="/encoding-settings/general/cae-settings.html#buffer_size_offset"><code translate="No">buffer_size_offset</code></a> ajustes. La <a href="/encoding-settings/general-audio-video/encoding-settings-rate-control.html#decoder_buffer_size"><code translate="No">decoder_buffer_size</code></a> se calcula como:</p>

    <pre class="line-numbers">
  <code class="language-javascript" translate="No">decoder_buffer_size = R * buffer_size_to_bitrate_ratio + buffer_size_offset</code></pre>

    <p>Tenga en cuenta que los límites máximos de la tasa de bits y del búfer también pueden estar limitados por el perfil del códec y / o la configuración de nivel. Algunos problemas generales de compatibilidad de dispositivos se pueden evitar limitando <a href="/encoding-settings/general/cae-settings.html#bitrate_cap_to_bitrate_ratio"><code translate="No">bitrate_cap_to_bitrate_ratio</code></a> a 2.0 o menos, y <a href="/encoding-settings/general/cae-settings.html#buffer_size_to_bitrate_ratio"><code translate="No">buffer_size_to_bitrate_ratio</code></a> a <code translate="No">2.0 * GOP length</code>(en segundos).</p>
  </section>
  <section class="bcls-section">
    <h2 id="CAE_and_Segmented_outputs">CAE y salidas segmentadas</h2>

    <p>CAE es compatible con salidas segmentadas en Zencoder. Sobre el <code translate="No">Output</code> configuración de reproducción, establezca el <a href="/encoding-settings/general/encoding-settings-general-output-settings.html#type"><code translate="No">type</code></a> como <code translate="No">segmented</code> y el apropiado <a href="/encoding-settings/general-audio-video/encoding-settings-segmented-streaming.html#segment_seconds"><code translate="No">segment_seconds</code></a> valor. También, <a href="/encoding-settings/general/cae-settings.html#keyframe_rate"><code translate="No">keyframe_rate</code></a> y <a href="/encoding-settings/general-audio-video/encoding-settings-frame-rate.html#fixed_keyframe_interval"><code translate="No">fixed_keyframe_interval</code></a> la configuración debe establecerse en <code translate="No">dynamic_profile_options</code>.</p>

    <h3>CAE - ejemplo de HLS</h3>

    <pre class="line-numbers">
  <code class="language-json" translate="No">{
    "input": "s3://test_bucket/test_media.mp4",
    "generate_dynamic_profile": true,
    "dynamic_profile_options": {
      "max_renditions": 6,
      "min_renditions": 2,
      "select_baseline_profile_configuration": true,
      "keyframe_rate": "0.5",
      "fixed_keyframe_interval": "true"
    },
    "outputs": [
      {
        "label": "CAE1",
        "dynamic_profile_rendition": 1,
        "base_url": "s3://test_bucket/outputs/HLS_CAE/CAE1",
        "filename": "CAE1.m3u8",
        "type": "segmented",
        "segment_seconds": 2,
        "byte_range_segmenting": true,
        "generate_keyframe_manifest": "true",
        "hls_protocol_version": 7,
        "skip_audio": true
      },
      {
        "label": "CAE2",
        "dynamic_profile_rendition": 2,
        "base_url": "s3://test_bucket/outputs/HLS_CAE/CAE2",
        "filename": "CAE2.m3u8",
        "type": "segmented",
        "segment_seconds": 2,
        "byte_range_segmenting": true,
        "generate_keyframe_manifest": "true",
        "hls_protocol_version": 7,
        "skip_audio": true
      },
      {
        "label": "CAE3",
        "dynamic_profile_rendition": 3,
        "base_url": "s3://test_bucket/outputs/HLS_CAE/CAE3",
        "filename": "CAE3.m3u8",
        "type": "segmented",
        "segment_seconds": 2,
        "byte_range_segmenting": true,
        "generate_keyframe_manifest": "true",
        "hls_protocol_version": 7,
        "skip_audio": true
      },
      {
        "label": "CAE4",
        "dynamic_profile_rendition": 4,
        "base_url": "s3://test_bucket/outputs/HLS_CAE/CAE4",
        "filename": "CAE4.m3u8",
        "type": "segmented",
        "segment_seconds": 2,
        "byte_range_segmenting": true,
        "generate_keyframe_manifest": "true",
        "hls_protocol_version": 7,
        "skip_audio": true
      },
      {
        "label": "CAE5",
        "dynamic_profile_rendition": 5,
        "base_url": "s3://test_bucket/outputs/HLS_CAE/CAE5",
        "filename": "CAE5.m3u8",
          "type": "segmented",
          "segment_seconds": 2,
          "byte_range_segmenting": true,
          "generate_keyframe_manifest": "true",
          "hls_protocol_version": 7,
          "skip_audio": true
        },
        {
          "label": "CAE6",
          "dynamic_profile_rendition": 6,
          "base_url": "s3://test_bucket/outputs/HLS_CAE/CAE6",
          "filename": "CAE6.m3u8",
          "type": "segmented",
          "segment_seconds": 2,
          "byte_range_segmenting": true,
          "generate_keyframe_manifest": "true",
          "hls_protocol_version": 7,
          "skip_audio": true
        }
        {
          "label": "Audio",
          "audio_bitrate": "128",
          "type": "segmented",
          "segment_seconds": 2,
          "byte_range_segmenting": true,
          "skip_video": true,
          "base_url": "s3://test_bucket/outputs/HLS_CAE/Audio/128k/",
          "filename": "audio_128k.ac3"
        },
        {
          "base_url": "s3://test_bucket/outputs/HLS_CAE/",
          "filename": "master_playlist.m3u8",
          "hls_protocol_version": 7,
          "type": "playlist",
          "allow_skipped_sources": true,
          "alternate_audio": {
            "128k_audio": {
              "path": "Audio/128k/audio_128k.m3u8",
              "language": "en",
              "source": "Audio"
            }
          }
          ],
          "streams": [
            {
              "path": "CAE1/CAE1.m3u8",
              "source": "CAE1",
              "audio": "128k_audio"
            },
            {
              "path": "CAE2/CAE2.m3u8",
              "source": "CAE2",
              "audio": "128k_audio"
            },
            {
              "path": "CAE3/CAE3.m3u8",
              "source": "CAE3",
              "audio": "128k_audio"
            },
            {
              "path": "CAE4/CAE4.m3u8",
              "source": "CAE4",
              "audio": "128k_audio"
            },
            {
              "path": "CAE5/CAE5.m3u8",
              "source": "CAE5",
              "audio": "128k_audio"
            },
            {
              "path": "CAE6/CAE6.m3u8",
              "source": "CAE6",
              "audio": "128k_audio"
            }
          ]
        }
      ]
    }</code></pre>

    <h3>CAE - ejemplo DASH</h3>

    <pre class="line-numbers">
  <code class="language-json" translate="No">
  {
    "input": "s3://test_bucket/test.mov",
    "generate_dynamic_profile": true,
    "dynamic_profile_options": {
      "max_renditions": 6,
      "min_renditions": 2,
      "select_baseline_profile_configuration": true,
      "keyframe_rate": "0.5",
      "fixed_keyframe_interval": "true"
    },
    "outputs": [
      {
        "label": "CAE1",
        "dynamic_profile_rendition": 1,
        "base_url": "s3://test_bucket/outputs/DASH_CAE/CAE1",
        "filename": "CAE1.mpd",
        "type": "segmented",
        "segment_seconds": 10,
        "streaming_delivery_format": "dash",
        "skip_audio": true,
        "public": true
      },
      {
        "label": "CAE2",
        "dynamic_profile_rendition": 2,
        "base_url": "s3://test_bucket/outputs/DASH_CAE/CAE2",
        "filename": "CAE2.mpd",
        "type": "segmented",
        "segment_seconds": 10,
        "streaming_delivery_format": "dash",
        "skip_audio": true,
        "public": true
      },
      {
        "label": "CAE3",
        "dynamic_profile_rendition": 3,
        "base_url": "s3://test_bucket/outputs/DASH_CAE/CAE3",
        "filename": "CAE3.mpd",
        "type": "segmented",
        "segment_seconds": 10,
        "streaming_delivery_format": "dash",
        "skip_audio": true,
        "public": true
      },
      {
        "label": "CAE4",
        "dynamic_profile_rendition": 4,
        "base_url": "s3://test_bucket/outputs/DASH_CAE/CAE4",
        "filename": "CAE4.mpd",
        "type": "segmented",
        "segment_seconds": 10,
        "streaming_delivery_format": "dash",
        "skip_audio": true,
        "public": true
      },
      {
        "label": "CAE5",
        "dynamic_profile_rendition": 5,
        "base_url": "s3://test_bucket/outputs/DASH_CAE/CAE5",
        "filename": "CAE5.mpd",
        "type": "segmented",
        "segment_seconds": 10,
        "streaming_delivery_format": "dash",
        "skip_audio": true,
        "public": true
      },
      {
        "label": "CAE6",
        "dynamic_profile_rendition": 6,
        "base_url": "s3://test_bucket/outputs/DASH_CAE/CAE6",
        "filename": "CAE6.mpd",
        "type": "segmented",
        "segment_seconds": 10,
        "streaming_delivery_format": "dash",
        "skip_audio": true,
        "public": true
      },
      {
        "label": "Audio",
        "audio_bitrate": "128",
        "type": "segmented",
        "segment_seconds": 10,
        "streaming_delivery_format": "dash",
        "skip_video": true,
        "base_url": "s3://test_bucket/outputs/DASH_CAE/Audio/128k/",
        "filename": "audio_128k.mpd",
        "public": true
      },
      {
        "base_url": "s3://test_bucket/outputs/DASH_CAE/",
        "filename": "master_playlist.mpd",
        "streaming_delivery_format": "dash",
        "type": "playlist",
        "allow_skipped_sources": true,
        "public": true,
        "streams": [
          {
            "path": "CAE1/CAE1.mpd",
            "source": "CAE1"
          },
          {
            "path": "CAE2/CAE2.mpd",
            "source": "CAE2"
          },
          {
            "path": "CAE3/CAE3.mpd",
            "source": "CAE3"
          },
          {
            "path": "CAE4/CAE4.mpd",
            "source": "CAE4"
          },
          {
            "path": "CAE5/CAE5.mpd",
            "source": "CAE5"
          },
          {
            "path": "CAE6/CAE6.mpd",
            "source": "CAE6"
          },
          {
            "path": "Audio/128k/audio_128k.mpd",
            "source": "Audio"
          }
        ]
      }
    ]
   }
  </code></pre>
  </section>
</article>