---
title: Descripción de DASH Streaming y Playlists: Este tema explica cómo configurar trabajos para la salida DASH.
parent: Encoding Guides
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="Introduction">Introducción</h2>

    <aside class="bcls-aside bcls-aside--information">Tenga en cuenta que Dash no es compatible con transmisiones en vivo usando Zencoder.</aside>
    <p>Debido a que DASH no es un formato de video específico, códec o formato de empaquetado independiente de datos (como Zip), hemos introducido una nueva opción llamada <a href="/encoding-settings/assets/encoding-settings-clips.html#streaming-delivery-format"><code translate="No">streaming_delivery_format</code></a>para especificar que los archivos multimedia deben estar estructurados / formateados de acuerdo con un estándar particular. Seleccionando "guión" como el <code translate="No">streaming_delivery_format</code> modificará algunas opciones predeterminadas para la compatibilidad con DASH, además de colocar los archivos multimedia de salida en una estructura de directorio consistente con los requisitos de DASH. Las salidas de medios DASH también deben tener <a href="/encoding-settings/general/encoding-settings-general-output-settings.html#type"><code translate="No">type</code></a> establecido en "segmentado", para garantizar que los medios estén preparados para la transmisión DASH.</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
    "input": "http://s3.amazonaws.com/zencodertesting/test.mov",
    "outputs": [
    {
        "streaming_delivery_format": "dash",
        "video_bitrate": 700,
        "type": "segmented",
        "url": "s3://mybucket/dash-examples/sbr/rendition.mpd"
    }
    ]
}</code></pre>

    <p>Detalles para salidas con <code translate="No">streaming_delivery_format</code> establecido en "guión":</p>

    <ul>
      <li><a href="/encoding-settings/general-audio-video/encoding-settings-frame-rate.html#fixed-keyframe-interval"><code translate="No">fixed_keyframe_interval</code></a> se establecerá en verdadero.</li>
      <li><a href="/encoding-settings/assets/encoding-settings-clips.html#segment-seconds"><code translate="No">segment_seconds</code></a> predeterminado a 2.</li>
      <li>El formato predeterminado será <code translate="No">m4f</code> (con un <code translate="No">mpd</code> archivo de manifiesto)</li>
    </ul>
    <p>Estructura de archivo para salidas DASH segmentadas:</p>

    <ul>
      <li>La <code translate="No">mpd</code> El archivo de manifiesto estará en el nivel raíz de la salida.</li>
      <li>Cada uno de los medios de audio y vídeo tendrá su propio subdirectorio:<code translate="No">audio/und</code>" " y "<code translate="No">video/1</code>" respectivamente.</li>
      <li>En cada uno de estos directorios habrá un "<code translate="No">init.mp4</code>" con los datos de inicialización.</li>
      <li>Los datos multimedia se incluirán en archivos denominados<code translate="No">seg-N.m4f</code>" " (donde N comienza en cero y aumenta para cada segmento).</li>
    </ul>
    <p>Salidas DASH con el <a href="/encoding-settings/assets/encoding-settings-clips.html#streaming-delivery-profile"><code translate="No">streaming_delivery_profile</code></a> establecido en "on_demand" utilizará archivos multimedia fragmentados en lugar de segmentos:</p>

    <ul>
      <li>La <code translate="No">mpd</code> El archivo de manifiesto estará en el nivel raíz de la salida.</li>
      <li>Los medios de audio y video serán cada uno un solo archivo en el mismo directorio que el manifiesto.</li>
      <li>Los archivos multimedia se nombrarán de manera similar al manifiesto, pero con "<code translate="No">-audio</code> " o "<code translate="No">-video</code> "sufijos agregados, según corresponda.</li>
    </ul>
    <p>Configuraciones DASH compatibles:</p>

    <ul>
      <li>Formatos admitidos: <code translate="No">m4f</code> y <code translate="No">webm</code></li>
      <li>Codecs de vídeo compatibles: <code translate="No">h264</code> <code translate="No">hevc</code>, <code translate="No">vp8</code>, y <code translate="No">vp9</code></li>
      <li>Codecs de audio compatibles: <code translate="No">aac</code> <code translate="No">ac3</code>, <code translate="No">eac3</code>, y <code translate="No">vorbis</code></li>
      <li>Los resultados en formato<code translate="No">webm</code>" " actualmente solo admiten el «on_demand» <code translate="No">streaming_delivery_profile</code></li>
      <li>Las salidas en formato<code translate="No">webm</code>" " actualmente no admiten DRM</li>
    </ul>
  </section>
  <section class="bcls-section">
    <h2 id="Multiple_Bitrates">Varias tasas de bits</h2>

    <p>Las salidas DASH generadas por Zencoder tendrán la estructura necesaria para reproducirse por sí mismas, pero para beneficiarse realmente de estas opciones de transmisión de transmisión, debe generar varias versiones con diferentes velocidades de bits (representaciones) junto con una salida de tipo "lista de reproducción" que enumere las representaciones. para que un jugador pueda cambiar la velocidad de bits hacia arriba o hacia abajo según sea necesario según las condiciones actuales de la red. La salida de la lista de reproducción es una salida dependiente, es decir, hará referencia a las otras salidas por su etiqueta y utilizará los datos de esas salidas para generar la interpretación final de la lista de reproducción. Tenga en cuenta que debe tener cuidado de establecer las rutas de transmisión en la salida de la lista de reproducción para que sean rutas relativas a la ubicación de los archivos de reproducción.</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
    "input": "http://s3.amazonaws.com/zencodertesting/test.mov",
    "outputs": [
    {
        "label": "dash-1200",
        "streaming_delivery_format": "dash",
        "video_bitrate": 1200,
        "type": "segmented",
        "url": "s3://mybucket/dash-examples/mbr/1200k/rendition.mpd"
    },
    {
        "label": "dash-700",
        "streaming_delivery_format": "dash",
        "video_bitrate": 700,
        "type": "segmented",
        "url": "s3://mybucket/dash-examples/mbr/700k/rendition.mpd"
    },
    {
        "label": "dash-400",
        "streaming_delivery_format": "dash",
        "video_bitrate": 400,
        "type": "segmented",
        "url": "s3://mybucket/dash-examples/mbr/400k/rendition.mpd"
    },
    {
        "streaming_delivery_format": "dash",
        "type": "playlist",
        "url": "s3://mybucket/dash-examples/mbr/manifest.mpd",
        "streams": [
        { "source": "dash-1200", "path": "1200k" },
        { "source": "dash-700",  "path": "700k" },
        { "source": "dash-400",  "path": "400k" }
        ]
    }
    ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="Encryption">Cifrado</h2>

    <p>Zencoder también admite la generación de salidas DASH cifradas con CENC, con los encabezados necesarios para la integración con los servidores de licencias Marlin o Playready. Para cada salida, simplemente especifique un hash de opciones drm, que incluye <a href="/encoding-settings/content-protection/encoding-settings-drm.html#method"><code translate="No">method</code></a>, <a href="/encoding-settings/content-protection/encoding-settings-drm.html#key-id"><code translate="No">key_id</code></a>, y <a href="/encoding-settings/content-protection/encoding-settings-drm.html#content-key"><code translate="No">content_key</code></a>. La <code translate="No">key_id</code> y <code translate="No">content_key</code> debe obtenerse de su proveedor de DRM o generarse previamente y enviarse a su proveedor de DRM. Una vez que tenga esas claves, la estructura de la API de Zencoder para una única interpretación es:</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
    "input": "http://s3.amazonaws.com/zencodertesting/test.mov",
    "outputs": [
    {
        "streaming_delivery_format": "dash",
        "video_bitrate": 700,
        "type": "segmented",
        "url": "s3://mybucket/dash-examples/sbr/rendition.mpd",
        "drm": {
            "method": "cenc",
            "key_id": "d57d416ccd454d5a08d05bff0742ee76",
            "content_key": "f15cae8f4e48a023056e1960ff2228b0"
        }
    }
    ]
}</code></pre>

    <p>El contenido se cifrará con el <code translate="No">content_key</code>, y el archivo de <code translate="No">.mpd</code> manifiesto incluirá el <code translate="No">key_id</code> en sus encabezados. Sin embargo, para garantizar que esta salida se pueda reproducir, también necesita encabezados que especifiquen cómo recuperar la <code translate="No">content_key</code>. En una codificación DASH de tasa de bits múltiple, estos encabezados solo deben agregarse a la salida de la lista de reproducción, pero también se pueden agregar a cada interpretación, por lo que la reproducción se puede reproducir individualmente. Esto se hace agregando uno o más esquemas DRM:</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">
    "input": "http://s3.amazonaws.com/zencodertesting/test.mov",
    "outputs": [
    {
        "streaming_delivery_format": "dash",
        "video_bitrate": 700,
        "type": "segmented",
        "url": "s3://mybucket/dash-examples/sbr/rendition.mpd",
        "drm": {
            "method": "cenc",
            "key_id": "d57d416ccd454d5a08d05bff0742ee76",
            "content_key": "f15cae8f4e48a023056e1960ff2228b0",
            "schemas": [
            { "type": "marlin" },
            { "type": "playready", "license_acquisition_url": "https://playready.example.com/license_server/" }
            ]
        }
    }
    ]
}</code></pre>

    <p>Luego, podemos unir esto para crear un trabajo DASH cifrado con DRM de tasa de bits múltiple:</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
    "input": "http://s3.amazonaws.com/zencodertesting/test.mov",
    "outputs": [
    {
        "label": "dash-1200",
        "streaming_delivery_format": "dash",
        "video_bitrate": 1200,
        "type": "segmented",
        "url": "s3://mybucket/dash-examples/mbr/1200k/rendition.mpd",
        "drm": {
            "method": "cenc",
            "key_id": "d57d416ccd454d5a08d05bff0742ee76",
            "content_key": "f15cae8f4e48a023056e1960ff2228b0"
        }
    },
    {
        "label": "dash-700",
        "streaming_delivery_format": "dash",
        "video_bitrate": 700,
        "type": "segmented",
        "url": "s3://mybucket/dash-examples/mbr/700k/rendition.mpd",
        "drm": {
            "method": "cenc",
            "key_id": "d57d416ccd454d5a08d05bff0742ee76",
            "content_key": "f15cae8f4e48a023056e1960ff2228b0"
        }
    },
    {
        "label": "dash-400",
        "streaming_delivery_format": "dash",
        "video_bitrate": 400,
        "type": "segmented",
        "url": "s3://mybucket/dash-examples/mbr/400k/rendition.mpd",
        "drm": {
            "method": "cenc",
            "key_id": "d57d416ccd454d5a08d05bff0742ee76",
            "content_key": "f15cae8f4e48a023056e1960ff2228b0"
        }
    },
    {
        "streaming_delivery_format": "dash",
        "type": "playlist",
        "url": "s3://mybucket/dash-examples/mbr/manifest.mpd",
        "streams": [
        { "source": "dash-1200", "path": "1200k" },
        { "source": "dash-700",  "path": "700k" },
        { "source": "dash-400",  "path": "400k" }
        ],
        "drm": {
            "method": "cenc",
            "key_id": "d57d416ccd454d5a08d05bff0742ee76",
            "content_key": "f15cae8f4e48a023056e1960ff2228b0",
            "schemas": [
            { "type": "marlin" },
            { "type": "playready", "license_acquisition_url": "https://playready.example.com/license_server/" }
            ]
        }
    }
    ]
}
</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="Transmuxing">Transmutación</h2>

    <p>Por supuesto, generar múltiples formatos de un video puede resultar costoso y derrochador. Por lo tanto, Zencoder admite el reempaquetado de las mismas transmisiones codificadas en diferentes formatos (llamado transmuxing), utilizando el <a href="/encoding-settings/general-audio-video/encoding-settings-transmuxing.html#copy-video"><code translate="No">copy_video</code></a> y <a href="/encoding-settings/general-audio-video/encoding-settings-transmuxing.html#copy-audio"><code translate="No">copy_audio</code></a> opciones. Las salidas para las que el vídeo se transmuxa en lugar de codificarse se cobran a 1/4 de la duración normal. Entonces, si planea crear múltiples formatos del mismo video (MP4, HLS y DASH, por ejemplo), puede codificar la versión MP4 de cada tasa de bits primero y luego transmutar esas salidas para crear las versiones HLS y DASH. (Tenga en cuenta que no admitimos la transmisión desde un formato segmentado, ya que el video ya no es una transmisión única).</p>

    <p>Para garantizar que el MP4 se prepare de acuerdo con las restricciones de los formatos de streaming segmentados posteriores, utilice también la <a href="/encoding-settings/assets/encoding-settings-clips.html#prepare-for-segmenting"><code translate="No">prepare_for_segmenting</code></a> opción de la salida MP4. Esto controlará los valores predeterminados para los fotogramas clave y los subtítulos al codificar la transmisión de video del MP4 para garantizar que sea compatible con la conversión a formatos segmentados posteriormente.</p>

    <p>El uso del MP4 como fuente para las salidas transmuxed funciona de manera similar a las salidas de la lista de reproducción. Especifica una opción de origen que coincide con la etiqueta de otra salida, pero esta vez es parte de las opciones de nivel principal para la salida en lugar de en el hash de las secuencias.</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
    "input": "http://s3.amazonaws.com/zencodertesting/test.mov",
    "outputs": [
    {
        "label": "mp4-700k",
        "prepare_for_segmenting": ["hls", "dash"],
        "video_bitrate": 700,
        "url": "s3://mybucket/transmux-examples/sbr/video.mp4"
    },
    {
        "source": "mp4-700k",
        "copy_video": true,
        "copy_audio": true,
        "type": "segmented",
        "url": "s3://mybucket/transmux-examples/sbr/hls/video.m3u8"
    },
    {
        "source": "mp4-700k",
        "copy_video": true,
        "copy_audio": true,
        "streaming_delivery_format": "dash",
        "type": "segmented",
        "url": "s3://mybucket/transmux-examples/sbr/dash/video.mpd"
    }
    ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="Optimizing_for_delivery">Optimización para la entrega</h2>

    <p>Dado que DASH está diseñado para la entrega de transmisión, recomendamos controlar los picos de las tasas de bits en cada interpretación para evitar que el reproductor vuelva a almacenar en búfer o cambie innecesariamente a codificaciones de tasas de bits más bajas. Las opciones que controlan la variabilidad del flujo codificado de acuerdo con lo que el decodificador / reproductor puede manejar son</p>

    <ul>
      <li><a href="/encoding-settings/general-audio-video/encoding-settings-rate-control.html#decoder-bitrate-cap"><code translate="No">decoder_bitrate_cap</code></a></li>
      <li><a href="/encoding-settings/general-audio-video/encoding-settings-rate-control.html#decoder-buffer-size"><code translate="No">decoder_buffer_size</code></a></li>
    </ul>
    <aside class="bcls-aside bcls-aside--information">Nota: <a href="/encoding-settings/general-audio-video/encoding-settings-rate-control.html#max-video-bitrate"><code translate="No">max_video_bitrate</code></a> es para controlar la tasa de bits promedio máxima en toda la transmisión y no es adecuado para su uso con contenido de transmisión.</aside>
    <p>Nuestra recomendación general es establecer <code translate="No">decoder_bitrate_cap</code> a la tasa de bits máxima disponible para la transmisión de video. Recuerde que debe tener en cuenta el audio, así como un poco de sobrecarga para el formato del archivo. La <code translate="No">decoder_buffer_size</code> se supone técnicamente que coincide con la memoria de búfer de vídeo disponible en el dispositivo de decodificación, pero a menudo se utiliza mejor para controlar la cantidad de contenido que se puede almacenar previamente en búfer. Funciona como múltiplo de los <code translate="No">decoder_bitrate_cap</code>, por ejemplo, si <code translate="No">decoder_bitrate_cap</code> era 500 (Kilobits por segundo), y <code translate="No">decoder_buffer_size</code> era 1000 (Kilobits), luego el búfer podía almacenar 2 segundos de vídeo. También recomendamos configurar el <a href="/encoding-settings/general-audio-video/encoding-settings-rate-control.html#video-bitrate"><code translate="No">video_bitrate</code></a> un poco más bajo que el <code translate="No">decoder_bitrate_cap</code>, lo que permite que el codificador para utilizar más datos para codificar escenas complejas y menos datos en escenas más sencillas. Un punto de partida decente sería asumir hasta un 10% de sobrecarga para el formato de archivo, estableciendo el <code translate="No">video_bitrate</code> 10% más bajo que el <code translate="No">decoder_bitrate_cap</code> y permitir que se almacenen en búfer aproximadamente 1,5 segundos de vídeo.</p>

    <p>Suponiendo que hay una conexión de 1000 Kbps disponible para el cliente:</p>

    <ul>
      <li>1000 x 0,90 = 900 Kbps disponibles tras restar un 10% para la sobrecarga de formato.</li>
      <li>900-128 = 772 Kbps de video <code translate="No">decoder_bitrate_cap</code> después de restar 128 Kbps para el audio.</li>
      <li>772 * 1,5 = 1158 KB <code translate="No">decoder_buffer_size</code> (para 1,5 segundos de vídeo).</li>
      <li>772 * 0,90 = velocidad de bits de vídeo objetivo de 695 Kbps (10% inferior a la <code translate="No">decoder_bitrate_cap</code>).</li>
    </ul>
    <p>Entonces, para un ejemplo de codificación de transmisión más correcto:</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
    "input": "http://s3.amazonaws.com/zencodertesting/test.mov",
    "outputs": [
    {
        "label": "mp4-1000k",
        "prepare_for_segmenting": ["hls", "dash"],
        "audio_bitrate": 128,
        "decoder_bitrate_cap": 772,
        "decoder_buffer_size": 1158,
        "video_bitrate": 695,
        "url": "s3://mybucket/transmux-examples/sbr/video.mp4"
    },
    {
        "source": "mp4-1000k",
        "copy_video": true,
        "copy_audio": true,
        "type": "segmented",
        "url": "s3://mybucket/transmux-examples/sbr/hls/video.m3u8"
    },
    {
        "source": "mp4-1000k",
        "copy_video": true,
        "copy_audio": true,
        "streaming_delivery_format": "dash",
        "type": "segmented",
        "url": "s3://mybucket/transmux-examples/sbr/dash/video.mpd"
    }
    ]
}</code></pre>

    <aside class="bcls-aside bcls-aside--information">Nota: Lo de arriba es <strong>no</strong> suficiente para garantizar que la codificación HLS pasaría la validación de Apple. Si bien se transmitirá sin problemas en una conexión de 1000 Kbps, Apple mide las tasas de bits por segmento (incluido el segmento final que puede tener una duración corta), sin tener en cuenta los aspectos de almacenamiento en búfer. Para asegurarte de que los códigos HLS superen la validación de Apple, consulta nuestra guía de HLS.</aside>
  </section>
  <section class="bcls-section">
    <h2 id="Putting_it_all_together">Poniendolo todo junto</h2>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
    "input": "http://s3.amazonaws.com/zencodertesting/test.mov",
    "outputs": [
    {
        "label": "mp4-1500k",
        "prepare_for_segmenting": ["hls", "dash"],
        "audio_bitrate": 128,
        "decoder_bitrate_cap": 1222,
        "decoder_buffer_size": 1833,
        "video_bitrate": 1100,
        "size": "1280x720",
        "url": "s3://mybucket/full-examples/mp4/1500.mp4"
    },
    {
        "label": "mp4-1000k",
        "prepare_for_segmenting": ["hls", "dash"],
        "audio_bitrate": 128,
        "decoder_bitrate_cap": 772,
        "decoder_buffer_size": 1158,
        "video_bitrate": 695,
        "size": "960x540",
        "url": "s3://mybucket/full-examples/mp4/1000.mp4"
    },
    {
        "label": "mp4-500k",
        "prepare_for_segmenting": ["hls", "dash"],
        "audio_bitrate": 128,
        "decoder_bitrate_cap": 322,
        "decoder_buffer_size": 483,
        "video_bitrate": 290,
        "size": "640x360",
        "url": "s3://mybucket/full-examples/mp4/500.mp4"
    },
    {
        "label": "hls-1500k",
        "source": "mp4-1500k",
        "copy_video": true,
        "copy_audio": true,
        "type": "segmented",
        "url": "s3://mybucket/full-examples/hls/1500.m3u8"
    },
    {
        "label": "hls-1000k",
        "source": "mp4-1000k",
        "copy_video": true,
        "copy_audio": true,
        "type": "segmented",
        "url": "s3://mybucket/full-examples/hls/1000.m3u8"
    },
    {
        "label": "hls-500k",
        "source": "mp4-500k",
        "copy_video": true,
        "copy_audio": true,
        "type": "segmented",
        "url": "s3://mybucket/full-examples/hls/500.m3u8"
    },
    {
        "type": "playlist",
        "url": "s3://mybucket/full-examples/hls/multi_bitrate_playlist.m3u8",
        "streams": [
        { "path": "1000.m3u8", "source": "hls-1000k" },
        { "path": "1500.m3u8", "source": "hls-1500k" },
        { "path": "500.m3u8", "source": "hls-500k" }
        ]
    },
    {
        "label": "dash-1500k",
        "source": "mp4-1500k",
        "copy_video": true,
        "copy_audio": true,
        "streaming_delivery_format": "dash",
        "type": "segmented",
        "url": "s3://mybucket/full-examples/dash/1500k/rendition.mpd",
        "drm": {
            "method": "cenc",
            "key_id": "d57d416ccd454d5a08d05bff0742ee76",
            "content_key": "f15cae8f4e48a023056e1960ff2228b0"
        }
    },
    {
        "label": "dash-1000k",
        "source": "mp4-1000k",
        "copy_video": true,
        "copy_audio": true,
        "streaming_delivery_format": "dash",
        "type": "segmented",
        "url": "s3://mybucket/full-examples/dash/1000k/rendition.mpd",
        "drm": {
            "method": "cenc",
            "key_id": "d57d416ccd454d5a08d05bff0742ee76",
            "content_key": "f15cae8f4e48a023056e1960ff2228b0"
        }
    },
    {
        "label": "dash-500k",
        "source": "mp4-500k",
        "copy_video": true,
        "copy_audio": true,
        "streaming_delivery_format": "dash",
        "type": "segmented",
        "url": "s3://mybucket/full-examples/dash/500k/rendition.mpd",
        "drm": {
            "method": "cenc",
            "key_id": "d57d416ccd454d5a08d05bff0742ee76",
            "content_key": "f15cae8f4e48a023056e1960ff2228b0"
        }
    },
    {
        "streaming_delivery_format": "dash",
        "type": "playlist",
        "url": "s3://mybucket/full-examples/dash/manifest.mpd",
        "streams": [
            { "source": "dash-1500k", "path": "1500k" },
            { "source": "dash-1000k", "path": "1000k" },
            { "source": "dash-500k",  "path": "500k" }
        ],
        "drm": {
            "method": "cenc",
            "key_id": "d57d416ccd454d5a08d05bff0742ee76",
            "content_key": "f15cae8f4e48a023056e1960ff2228b0",
            "schemas": [
                { "type": "marlin" },
                { "type": "playready", "license_acquisition_url": "https://playready.example.com/license_server/" }
            ]
        }
    }
    ]
}</code></pre>
  </section>
</article>