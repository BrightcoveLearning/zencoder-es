---
title: Usando Zencoder con la descripción S3: Zencoder puede cargar y descargar archivos desde su depósito de Amazon S3. Para que Zencoder descargue archivos, es necesario que todos puedan acceder a ellos, o se debe agregar una política de depósito a su depósito que otorgue acceso a Zencoder, o debe guardar las credenciales en su cuenta para acceder al depósito.
parent: General Information
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

	<section class="bcls-section">
		<h2 id="Introduction">Introducción</h2>
		<p>Zencoder puede cargar y descargar archivos desde su depósito de Amazon S3. Para que Zencoder descargue archivos, es necesario que todos puedan acceder a ellos, o se debe agregar una política de depósito a su depósito que otorgue acceso a Zencoder, o debe guardar las credenciales en su cuenta para acceder al depósito.</p>
		<aside class="bcls-aside bcls-aside--information">Tenga en cuenta que Zencoder solo admite depósitos de Amazon AWS S3. <strong>Los depósitos de almacenamiento compatibles con S3 de proveedores que no son de Amazon son <em>no</em> soportado.</strong></aside>
	</section>

  <section class="bcls-section">
    <h2 id="Use_credentials">Usa credenciales</h2>

    <p>Puedes guardar <a href="/encoding-settings/general/encoding-settings-general-output-settings.html#credentials">cartas credenciales</a> a su cuenta, lo que nos permitirá usar su cuenta para cargar archivos en lugar de los nuestros. Esto significa que su cuenta es la propietaria del archivo, con todos los derechos y privilegios sobre él. Puede configurar las credenciales para que sean las predeterminadas para todas las cargas y descargas o hacer referencia a ellas con cada solicitud, pero tenga en cuenta que si las configura como predeterminadas para S3, se utilizarán para TODAS las cargas y descargas de S3. Por lo general, esto no es un problema, pero si luego desea cargarlo en el depósito de un tercero, esto puede causar problemas.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Use_a_bucket_policy">Utilice una política de depósito</h2>

    <p>Otra opción es utilizar una política de depósito, que le permite establecer permisos en todos los archivos de su depósito. Para comenzar, visite <a href="http://aws.amazon.com/console/">Consola de AWS</a>. Seleccione su depósito en el lado izquierdo de la pantalla, luego haga clic en "propiedades". En la última fila, haga clic en "Agregar política de depósito". A continuación, crearemos una Política de depósito, que copiará en el cuadro de texto Política de depósito.</p>

    <p>Nuestra política de cubos recomendada:</p>

    <pre class="line-numbers">
 <code class="language-json" translate="No">{
"Version": "2012-10-17",
"Id": "ZencoderBucketPolicy",
"Statement": [
  {
      "Sid": "Stmt1295042087538",
      "Effect": "Allow",
      "Principal": {
          "AWS": "arn:aws:iam::395540211253:root"
      },
      "Action": [
      "s3:GetObjectAcl",
      "s3:GetObject",
      "s3:PutObjectAcl",
      "s3:PutObject",
      "s3:ListMultipartUploadParts"
      ],
      "Resource": "arn:aws:s3:::MY-BUCKET/*"
  },
  {
      "Sid": "Stmt1295042087538",
      "Effect": "Allow",
      "Principal": {
          "AWS": "arn:aws:iam::395540211253:root"
      },
      "Action": [
      "s3:ListBucketMultipartUploads",
      "s3:GetBucketLocation"
      ],
      "Resource": "arn:aws:s3:::MY-BUCKET"
  }
]
}</code></pre>
    <aside class="bcls-aside bcls-aside--warning">Tenga en cuenta que incluso cuando use esta política, las cargas fallarán si el depósito está configurado para bloquear las LCA públicas:
      <figure class="bcls-figure"><img class="bcls-image" alt="S3 ACL Permissions" src="/assets/images/general-information/acl-policy.png" />
        <figcaption class="bcls-caption--image">Permisos de S3 ACL</figcaption>
      </figure>
    </aside>
    <p>Solo hay <strong>un cambio que tendrás que hacer</strong> a esta política de depósito antes de que esté listo para funcionar.</p>

    <ol>
      <li>Reemplace MY-BUCKET con el nombre de su balde. Deje / * al final de la línea, ya que se aplicará la política a cada archivo dentro del depósito.</li>
      <li>Opcionalmente, reemplace la matriz de acciones con las acciones que desea permitir. Las acciones válidas que Zencoder puede necesitar son:
        <h4>Permisos de objeto: primera matriz de acciones en el ejemplo anterior</h4>

        <ul>
          <li><code translate="No">s3:PutObject</code>- permitir que Zencoder cargue archivos en el depósito</li>
          <li><code translate="No">s3:GetObject</code>- permitir que Zencoder descargue archivos del depósito</li>
          <li><code translate="No">s3:GetObjectAcl</code>- permitir que Zencoder obtenga permisos ACL para archivos</li>
          <li><code translate="No">s3:PutObjectAcl</code>- permitir que Zencoder establezca permisos de ACL para otros usuarios en archivos</li>
          <li><code translate="No">s3:ListMultipartUploadParts</code>- permitir que Zencoder enumere qué partes de un archivo de varias partes se han subido al depósito</li>
        </ul>
        <h4>Permisos de depósito: segunda matriz de acción en el ejemplo anterior</h4>

        <ul>
          <li><code translate="No">s3:GetBucketLocation</code>- permitir que Zencoder obtenga la ubicación del cubo (EE. UU., UE, Asia, etc.)</li>
          <li><code translate="No">s3:ListBucketMultipartUploads</code>- Permita que Zencoder vea cualquier carga de varias partes que esté ocurriendo actualmente en el depósito.
            <p><code translate="No">ex:</code> Si desea que Zencoder pueda descargar y cargar archivos, reemplace la primera matriz de acción con:</p>

            <pre class="line-numbers">
<code class="language-json" translate="No">["s3:PutObject", "s3:GetObject"]</code></pre>
          </li>
        </ul>
      </li>
    </ol>
    <p>Tenga en cuenta que hay dos declaraciones en la política. La primera declaración afecta a las claves dentro del depósito, mientras que la segunda parte afecta al depósito en sí.</p>

    <p>El resto de la política se puede dejar solo y funcionará bien. La documentación de Amazon contiene más información sobre el <a href="http://docs.amazonwebservices.com/AmazonS3/latest/dev/index.html?UsingBucketPolicies.html">elementos de una política de depósito.</a></p>

    <p>Zencoder también puede establecer permisos ACL en los videos y miniaturas que creamos para usted. Esto está documentado en nuestro <a href="/encoding-settings/sources-destinations/encoding-settings-s3-settings.html">Documentos de la API de S3</a>.</p>

    <p><strong>Nota:</strong> Cuando utilice una política de depósito, siempre debe utilizar las URL en el formato s3: // BUCKET / KEY para que Zencoder esté seguro de identificarlas como URL de S3 y firmar la solicitud de forma adecuada.</p>

    <p>Si desea crear su propia política de depósito, puede utilizar <a href="http://awspolicygen.s3.amazonaws.com/policygen.html">Generador de políticas de Amazon</a>. Usar <em>arn:aw:iam: 395540211253: root</em> como el director de AWS para permitir el acceso a Zencoder.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Specific_files">Archivos específicos</h2>

    <h3>¿Puedo simplemente otorgar permiso a archivos específicos?</h3>

    <p>Definitivamente puedes. Si bien el enfoque de la política de depósito es generalmente más fácil y rápido, no funciona bien para todos. Si es usted, puede otorgar permisos a nuestra cuenta de Amazon AWS, <code translate="No">aws@zencoder.com</code>.</p>

    <p>Si necesita utilizar nuestro ID canónico en su lugar, puede utilizar <code translate="No">6c8583d84664a381db0c6af0e79b285ede571885fbe768e7ea50e5d3760597dd</code>.</p>
  </section>
  <section class="bcls-section">
    <h2>Solución de problemas</h2>

    <h3 id="Troubleshooting">¡Todavía me niegan el permiso!</h3>

    <p>S3 responde con "Acceso denegado" si se niega el acceso o si no se encuentra el archivo. Si cree que ha configurado correctamente sus credenciales de S3 o su política de depósito, pero sigue recibiendo errores de "Acceso denegado", vuelva a comprobar la URL que está enviando. Si la entrada parece <code translate="No">"s3://my-bucket/this+file+is+great.mp4"</code>, hay una buena posibilidad de que lo que realmente quieres es <code translate="No">"s3://my-bucket/this file is great.mp4"</code></p>

    <h3>¡Recibo un error al utilizar la región de la UE de Frankfurt!</h3>

    <p>Para utilizar la región de la UE de Frankfurt con Zencoder, debe generar URL de S3 que contengan el nombre de la región. Para hacer esto, simplemente cree URL como esta <code translate="No">"s3+eu-central-1://my-bucket/file.mp4"</code>.</p>
  </section>
</article>